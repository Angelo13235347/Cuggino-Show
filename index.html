<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuggi Show - Edizione Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --dark: #292F36;
            --light: #F7FFF7;
            --success: #6BCB77;
            --warning: #FFD166;
            --danger: #EF476F;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #292F36, #1A1E23);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Effetti particellari */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        h1, h2, h3 {
            font-family: 'Fredoka One', cursive;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        h1 {
            color: var(--accent);
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #FF6B6B, #FFE66D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            color: var(--secondary);
            font-size: 2rem;
            margin-bottom: 15px;
        }

        h3 {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Pulsanti */
        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 15px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            border: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            z-index: 1;
            min-width: 200px;
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2));
            z-index: -1;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .button:hover::before {
            opacity: 1;
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button:active {
            transform: translateY(1px);
        }

        .button.accept {
            background: linear-gradient(45deg, var(--success), #4CAF50);
            color: white;
        }

        .button.refuse {
            background: linear-gradient(45deg, var(--danger), #EF476F);
            color: white;
        }

        .button.destiny {
            background: linear-gradient(45deg, var(--warning), #FFD166);
            color: var(--dark);
        }

        .button.complete-challenge {
            background: linear-gradient(45deg, #8E44AD, #9B59B6);
            color: white;
        }

        .button.change-challenge {
            background: linear-gradient(45deg, #6c757d, #495057);
            color: white;
        }

        .button.start {
            background: linear-gradient(45deg, var(--primary), var(--danger));
            color: white;
            font-size: 1.2rem;
            padding: 18px 32px;
        }

        /* Icone pulsanti */
        .button i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Schermate */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Video intro */
        #intro-video {
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            margin: 20px auto;
            border: 4px solid var(--accent);
        }

        /* Selezione personaggio */
        #character-select {
            width: 100%;
            max-width: 400px;
            padding: 12px 20px;
            border-radius: 50px;
            border: none;
            background-color: rgba(255,255,255,0.9);
            font-size: 1rem;
            margin: 20px auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
        }

        /* Timer */
        #timer-container {
            width: 100%;
            max-width: 500px;
            height: 30px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 15px;
            margin: 30px auto;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }

        #timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success), #4CAF50);
            border-radius: 15px;
            transition: width 1s linear;
            position: relative;
        }

        #timer-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            font-size: 1rem;
        }

        /* Punti */
        #points {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 300px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent);
            border: 2px solid var(--accent);
        }

        /* Sfida */
        #challenge-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.2);
        }

        #challenge-title {
            color: var(--accent);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        #challenge-points {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Modali */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: linear-gradient(135deg, #2D3748, #1A202C);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            animation: modalIn 0.4s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal h3 {
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }

        .modal p {
            margin-bottom: 15px;
        }

        .modal .close {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            display: block;
            width: 100%;
            transition: all 0.3s ease;
        }

        .modal .close:hover {
            background: #d23369;
        }

        /* Pulsante regolamento */
        .help-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--danger));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .help-button:hover {
            transform: scale(1.1) rotate(15deg);
        }

        /* Animazioni */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .button {
                padding: 12px 20px;
                font-size: 1rem;
                min-width: 160px;
            }
            
            #intro-video {
                max-width: 100%;
            }
            
            .modal-content {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .button {
                width: 100%;
                margin: 8px 0;
            }
            
            #character-select {
                padding: 10px 15px;
            }
        }

        /* Effetti speciali */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--accent);
            opacity: 0;
            z-index: 999;
            animation: confetti 5s ease-in-out;
        }

        @keyframes confetti {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Stile per il testo della sfida */
        .challenge-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 25px;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid var(--accent);
        }

        /* Stile per i pulsanti delle sfide */
        .challenge-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        /* Effetto hover per i pulsanti delle sfide */
        .challenge-button {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .challenge-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Effetti particellari -->
    <div class="particles" id="particles"></div>

    <!-- Schermata di benvenuto -->
    <div class="container">
        <div class="screen active" id="welcome-screen">
            <h1><i class="fas fa-gamepad"></i> Cuggi Show Premium</h1>
            <p>Preparati per un'esperienza di gioco incredibile! Guarda il video introduttivo prima di iniziare.</p>
            
            <video id="intro-video" controls autoplay>
                <source src="Lorenzo.mp4" type="video/mp4">
                Il tuo browser non supporta il tag video.
            </video>
            
            <button class="button start pulse" onclick="showCharacterSelection()">
                <i class="fas fa-play"></i> Inizia il Gioco
            </button>
        </div>

        <!-- Schermata di selezione personaggio -->
        <div class="screen" id="character-screen">
            <h1><i class="fas fa-user"></i> Scegli il tuo Personaggio</h1>
            <p>Seleziona il tuo avatar per iniziare l'avventura!</p>
            
            <select id="character-select">
                <option value="Angelo">Angelo</option>
                <option value="Matilde">Matilde</option>
                <option value="Eleonora">Eleonora</option>
                <option value="Rita">Rita</option>
                <option value="Federico">Federico</option>
                <option value="Rebecca">Rebecca</option>
                <option value="Alessandro">Alessandro</option>
                <option value="Francesco">Francesco</option>
                <option value="Giulia">Giulia</option>
            </select>
            
            <button class="button start" onclick="startGame()">
                <i class="fas fa-check"></i> Conferma
            </button>
        </div>

        <!-- Schermata di gioco principale -->
        <div class="screen" id="game-screen">
            <h1 id="character-name"></h1>
            <p>Scegli il tipo di sfida che vuoi affrontare:</p>
            
            <div class="challenge-buttons">
                <button class="button accept challenge-button" onclick="acceptChallenge()">
                    <i class="fas fa-check-circle"></i> Accetta la Sfida
                </button>
                
                <button class="button refuse challenge-button" onclick="refuseChallenge()">
                    <i class="fas fa-times-circle"></i> Rifiuta la Sfida
                </button>
                
                <button class="button destiny challenge-button" onclick="destinyChallenge()">
                    <i class="fas fa-star"></i> Mettiti alla Prova
                </button>
            </div>
            
            <div id="points">
                <i class="fas fa-coins"></i> Punti: <span id="points-value">0</span> Dollari Lonziani
            </div>
        </div>

        <!-- Schermata di sfida -->
        <div class="screen" id="challenge-screen">
            <h2><i class="fas fa-tasks"></i> Nuova Sfida!</h2>
            
            <div id="challenge-card">
                <h3 id="challenge-title"></h3>
                <span id="challenge-points" class="pulse"></span>
                
                <div class="challenge-text" id="challenge-description"></div>
                
                <div id="timer-container">
                    <div id="timer-bar"></div>
                    <div id="timer-number">00</div>
                </div>
                
                <div class="challenge-buttons">
                    <button class="button complete-challenge challenge-button" onclick="completeChallenge()">
                        <i class="fas fa-flag-checkered"></i> Completa
                    </button>
                    
                    <button class="button change-challenge challenge-button" onclick="changeChallenge()">
                        <i class="fas fa-sync-alt"></i> Cambia
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pulsante regolamento -->
    <div class="help-button" onclick="showRegulation()">
        <i class="fas fa-question"></i>
    </div>

    <!-- Modale regolamento -->
    <div class="modal" id="regulation-modal">
        <div class="modal-content">
            <h3><i class="fas fa-book"></i> Regolamento del Gioco</h3>
            <p><strong>1. Scegli il tuo personaggio</strong>: Ogni giocatore deve scegliere un personaggio tra quelli disponibili.</p>
            <p><strong>2. Tipi di sfide</strong>:</p>
            <ul style="margin-left: 20px; margin-bottom: 15px;">
                <li><strong>Accetta la sfida</strong>: Sfida media da 5 punti</li>
                <li><strong>Rifiuta la sfida</strong>: Sfida semplice da 2 punti</li>
                <li><strong>Mettiti alla prova</strong>: Sfida difficile da 10 punti</li>
            </ul>
            <p><strong>3. Tempo</strong>: Ogni sfida ha un tempo limitato in base alla difficolt√†.</p>
            <p><strong>4. Vincita</strong>: Il primo che raggiunge 50 punti vince!</p>
            <button class="close" onclick="closeRegulation()">
                <i class="fas fa-times"></i> Chiudi
            </button>
        </div>
    </div>

    <!-- Modale tempo scaduto -->
    <div class="modal" id="time-up-modal">
        <div class="modal-content">
            <h3><i class="fas fa-clock"></i> Tempo Scaduto!</h3>
            <p>Non sei riuscito a completare la sfida in tempo!</p>
            <p>Prova ancora con una nuova sfida.</p>
            <button class="close" onclick="closeTimeUpModal()">
                <i class="fas fa-redo"></i> Riprova
            </button>
        </div>
    </div>

    <!-- Modale congratulazioni -->
    <div class="modal" id="congratulations-modal">
        <div class="modal-content">
            <h3><i class="fas fa-trophy"></i> Congratulazioni, <span id="winner-name"></span>!</h3>
            <p>Hai vinto con <span id="final-points"></span> punti!</p>
            <p>Sei il campione del Cuggi Show!</p>
            <button class="close" onclick="closeCongratulations()">
                <i class="fas fa-check"></i> Fantastic!
            </button>
        </div>
    </div>

    <script>
        // Variabili globali
        let points = 0;
        let character = "";
        let currentChallenge = {};
        let currentChallengeType = '';
        let timerInterval;
        let totalTime;
        
        // Lista delle sfide (come nel tuo codice originale)
        const challengeList = {
            accept: [
                { "challenge": "Fai 20 salti consecutivi senza fermarti", "points": 5 },
                { "challenge": "Danza per 1 minuto senza ripetere i movimenti", "points": 5 },
                // ... (tutte le altre sfide come nel tuo codice)
            ],
            refuse: [
                { "challenge": "Trova un oggetto blu nella stanza", "points": 2 },
                { "challenge": "Conta da 1 a 20 senza fermarti", "points": 2 },
                // ... (tutte le altre sfide come nel tuo codice)
            ],
            destiny: [
                { "challenge": "Esegui 50 salti sul posto in meno di 1 minuto", "points": 10 },
                { "challenge": "Memorizza e recita una frase di 20 parole lette solo una volta", "points": 10 },
                // ... (tutte le altre sfide come nel tuo codice)
            ]
        };

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            // Nascondi tutti gli elementi tranne la schermata di benvenuto
            document.querySelectorAll('.screen').forEach(screen => {
                if (!screen.classList.contains('active')) {
                    screen.style.display = 'none';
                }
            });
            
            // Crea particelle decorative
            createParticles();
            
            // Gestisci fine video intro
            document.getElementById('intro-video').addEventListener('ended', function() {
                this.style.display = 'none';
            });
        });

        // Funzione per creare particelle decorative
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = window.innerWidth < 768 ? 30 : 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.width = `${Math.random() * 5 + 2}px`;
                particle.style.height = particle.style.width;
                particle.style.backgroundColor = `hsl(${Math.random() * 60 + 180}, 70%, 60%)`;
                particle.style.borderRadius = '50%';
                particle.style.opacity = Math.random() * 0.5 + 0.1;
                
                // Posizione iniziale casuale
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                // Animazione
                const duration = Math.random() * 20 + 10;
                const delay = Math.random() * 5;
                particle.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
                
                particlesContainer.appendChild(particle);
            }
            
            // Aggiungi stile per l'animazione
            const style = document.createElement('style');
            style.textContent = `
                @keyframes float {
                    0%, 100% {
                        transform: translate(0, 0);
                    }
                    25% {
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px);
                    }
                    50% {
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px);
                    }
                    75% {
                        transform: translate(${Math.random() * 50 - 25}px, ${Math.random() * 50 - 25}px);
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // Mostra selezione personaggio
        function showCharacterSelection() {
            document.getElementById('welcome-screen').classList.remove('active');
            document.getElementById('welcome-screen').style.display = 'none';
            
            document.getElementById('character-screen').classList.add('active');
            document.getElementById('character-screen').style.display = 'block';
            
            // Effetto confetti
            createConfetti();
        }

        // Inizia il gioco
        function startGame() {
            character = document.getElementById('character-select').value;
            document.getElementById('character-name').innerText = character;
            
            document.getElementById('character-screen').classList.remove('active');
            document.getElementById('character-screen').style.display = 'none';
            
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('game-screen').style.display = 'block';
            
            // Mostra punti
            document.getElementById('points').style.display = 'block';
            
            // Effetto confetti
            createConfetti();
        }

        // Accetta sfida
        function acceptChallenge() {
            currentChallengeType = 'accept';
            loadChallenge();
            playSound('accept');
        }

        // Rifiuta sfida
        function refuseChallenge() {
            currentChallengeType = 'refuse';
            loadChallenge();
            playSound('refuse');
        }

        // Sfida destino
        function destinyChallenge() {
            currentChallengeType = 'destiny';
            loadChallenge();
            playSound('destiny');
        }

        // Carica sfida
        function loadChallenge() {
            const challenge = getRandomChallenge(currentChallengeType);
            currentChallenge = challenge;

            // Aggiorna UI
            document.getElementById('challenge-title').innerText = challenge.challenge;
            document.getElementById('challenge-description').innerText = challenge.challenge;
            document.getElementById('challenge-points').innerText = `${challenge.points} Punti`;
            
            // Nascondi schermata gioco e mostra sfida
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('game-screen').style.display = 'none';
            
            document.getElementById('challenge-screen').classList.add('active');
            document.getElementById('challenge-screen').style.display = 'block';
            
            // Avvia timer
            startTimer(challenge.points);
            
            // Effetto confetti
            createConfetti();
        }

        // Ottieni sfida casuale
        function getRandomChallenge(type) {
            const challenges = challengeList[type];
            return challenges[Math.floor(Math.random() * challenges.length)];
        }

        // Avvia timer
        function startTimer(points) {
            let duration;
            if (points === 2) {
                duration = 15;  // 15 secondi per sfide da 2 punti
            } else if (points === 5) {
                duration = 30;  // 30 secondi per sfide da 5 punti
            } else if (points === 10) {
                duration = 45;  // 45 secondi per sfide da 10 punti
            }

            totalTime = duration;
            document.getElementById('timer-number').innerText = `${totalTime}s`;
            document.getElementById('timer-bar').style.width = '100%';

            timerInterval = setInterval(function() {
                duration--;
                document.getElementById('timer-number').innerText = `${duration}s`;
                const barWidth = (duration / totalTime) * 100;
                document.getElementById('timer-bar').style.width = `${barWidth}%`;

                // Cambia colore in base al tempo rimanente
                if (duration <= totalTime * 0.3) {
                    document.getElementById('timer-bar').style.background = 'linear-gradient(90deg, var(--danger), #EF476F)';
                } else if (duration <= totalTime * 0.6) {
                    document.getElementById('timer-bar').style.background = 'linear-gradient(90deg, var(--warning), #FFD166)';
                }

                if (duration <= 0) {
                    clearInterval(timerInterval);
                    showTimeUpModal();
                }
            }, 1000);
        }

        // Completa sfida
        function completeChallenge() {
            clearInterval(timerInterval);
            points += currentChallenge.points;
            document.getElementById('points-value').innerText = points;
            
            // Torna alla schermata di gioco
            document.getElementById('challenge-screen').classList.remove('active');
            document.getElementById('challenge-screen').style.display = 'none';
            
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('game-screen').style.display = 'block';
            
            // Controlla se ha vinto
            checkForWinner();
            
            // Effetto confetti
            createConfetti();
        }

        // Cambia sfida
        function changeChallenge() {
            clearInterval(timerInterval);
            
            // Torna alla schermata di gioco
            document.getElementById('challenge-screen').classList.remove('active');
            document.getElementById('challenge-screen').style.display = 'none';
            
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('game-screen').style.display = 'block';
        }

        // Controlla vincitore
        function checkForWinner() {
            if (points >= 50) {
                showCongratulations();
            }
        }

        // Mostra regolamento
        function showRegulation() {
            document.getElementById('regulation-modal').style.display = 'flex';
        }

        // Chiudi regolamento
        function closeRegulation() {
            document.getElementById('regulation-modal').style.display = 'none';
        }

        // Mostra tempo scaduto
        function showTimeUpModal() {
            document.getElementById('time-up-modal').style.display = 'flex';
        }

        // Chiudi tempo scaduto
        function closeTimeUpModal() {
            document.getElementById('time-up-modal').style.display = 'none';
            changeChallenge();
        }

        // Mostra congratulazioni
        function showCongratulations() {
            document.getElementById('winner-name').innerText = character;
            document.getElementById('final-points').innerText = points;
            document.getElementById('congratulations-modal').style.display = 'flex';
            
            // Grande effetto confetti
            for (let i = 0; i < 100; i++) {
                createConfetti();
            }
        }

        // Chiudi congratulazioni
        function closeCongratulations() {
            document.getElementById('congratulations-modal').style.display = 'none';
        }

        // Crea effetto confetti
        function createConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#6BCB77', '#EF476F'];
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = confetti.style.width;
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                
                document.body.appendChild(confetti);
                
                // Rimuovi dopo l'animazione
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Riproduci suono
        function playSound(type) {
            const sounds = {
                'accept': 'https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3',
                'refuse': 'https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3',
                'destiny': 'https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3',
                'win': 'https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3'
            };
            
            const audio = new Audio(sounds[type]);
            audio.play().catch(e => console.log("Audio non riprodotto:", e));
        }
    </script>
</body>
</html>
